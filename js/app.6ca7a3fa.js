(function(e){function t(t){for(var o,r,c=t[0],i=t[1],l=t[2],u=0,d=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);b&&b(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},s={app:0},a=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d208bfd":"bafde571","chunk-599f2679":"5c1bb85b","chunk-640a155a":"b73cd508"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-599f2679":1,"chunk-640a155a":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-2d208bfd":"31d6cfe0","chunk-599f2679":"08db646d","chunk-640a155a":"931f357b"}[e]+".css",s=i.p+o,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var l=a[c],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===s))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){l=d[c],u=l.getAttribute("data-href");if(u===o||u===s)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var o=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete r[e],b.parentNode.removeChild(b),n(a)},b.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(b)})).then((function(){r[e]=0})));var o=s[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,n){o=s[e]=[t,n]}));t.push(o[2]=a);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=c(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(b);var n=s[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",d.name="ChunkLoadError",d.type=o,d.request=r,n[1](d)}s[e]=void 0}};var b=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vue-page/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var b=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},2948:function(e,t,n){"use strict";var o=n("7a23"),r=n("bc3a"),s=n.n(r),a=n("4914");async function c(e,t){const n={email:e,password:t},{data:o}=await s.a.post("/v1/auth/login",n,{headers:{"Content-Type":"application/json"}});return o.token&&(s.a.defaults.headers.common["Authorization"]=o.token,localStorage.setItem("user",JSON.stringify(o))),o}async function i(){const{data:e}=await s.a.get("/v1/auth/me");return e}async function l(){s.a.defaults.headers.common["Authorization"]="",localStorage.removeItem("user")}async function u(e,t,n){const o={name:e,email:t,password:n},{data:r}=await s.a.post("/v1/auth/register",o,{headers:{"Content-Type":"application/json"}});return r}async function d(){const e=JSON.parse(localStorage.getItem("guestInfo")||"{}");if(console.log("guestInfo ",e),e&&e._id)return e;{const e={_id:Object(a["a"])(),name:""};return localStorage.setItem("guestInfo",JSON.stringify(e)),e}}const b=Object(o["z"])({_id:"",name:"",email:"",role:"",error:""}),m=Object(o["z"])({isLoggedIn:Object(o["b"])(()=>""!==b.email)}),j={async getUser(){const e=await i();if(!e){const e=await d();return b._id=e._id,e}if(e.user){const t=e.user;return b._id=t._id,b.name=t.name,b.email=t.email,b.role=t.role,t}return{}},async login(e,t){const n=await c(e,t);if(null==n)return b.error="Could not find user.",!1;if(n.user){const e=n.user;b.name=e.name,b.email=e.email,b.error=""}return!0},async logout(){await l(),b.name="",b.email=""},async register(e,t,n){const o=await u(e,t,n);return null==o?(b.error="Could not find user.",!1):!!o.user}};t["a"]={state:b,getters:m,...j}},3413:function(e,t,n){},"34fc":function(e,t,n){"use strict";n("3413")},"391d":function(e,t,n){},4914:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var o=n("9612");function r(e){return e<10?"0"+e:e}function s(){return o["a"].v4().replace(/-/g,"")}},"49b9":function(e,t,n){"use strict";n("391d")},"5c88":function(e,t,n){"use strict";n("a4a3")},"66a1":function(e,t,n){},"6a72":function(e,t,n){},"6d1f":function(e,t,n){"use strict";n("14d9");var o=n("7a23"),r=n("bc3a"),s=n.n(r);async function a(){const{data:e}=await s.a.get("/v1/rooms");return e}async function c(e){const{data:t}=await s.a.get("/v1/rooms/"+e);return t}async function i(e){const t={roomName:e},{data:n}=await s.a.post("/v1/rooms",t,{headers:{"Content-Type":"application/json"}});return n}async function l(e){const{data:t}=await s.a.post("/v1/rooms/start-session",e,{headers:{"Content-Type":"application/json"}});return t}async function u(e){const{data:t}=await s.a.post("/v1/rooms/result-session",e,{headers:{"Content-Type":"application/json"}});return t}async function d(e){const{data:t}=await s.a.post("/v1/rooms/end-session",e,{headers:{"Content-Type":"application/json"}});return t}async function b(e){const{data:t}=await s.a.put("/v1/rooms/voting/"+e.roomId,e,{headers:{"Content-Type":"application/json"}});return t}const m=Object(o["z"])({rooms:[],selectedRoom:"",roomInfo:{_id:"",roomName:"",adminRoom:"",players:[],timeCountDown:{playing:!1,status:"initial",endTime:(new Date).toISOString()},listResult:[]},pockerCards:["0","1/2","1","3","5","8","13","?"],currentSession:{}}),j=Object(o["z"])({selectedRoom:Object(o["b"])(()=>m.selectedRoom),roomName:Object(o["b"])(()=>m.roomInfo.roomName),playing:Object(o["b"])(()=>{var e;return null===(e=m.roomInfo.timeCountDown)||void 0===e?void 0:e.playing}),roomStatus:Object(o["b"])(()=>{var e;return null===(e=m.roomInfo.timeCountDown)||void 0===e?void 0:e.status}),endTime:Object(o["b"])(()=>{var e;return null===(e=m.roomInfo.timeCountDown)||void 0===e?void 0:e.endTime}),activeSession:Object(o["b"])(()=>m.roomInfo.listResult&&m.roomInfo.listResult.length>0?m.roomInfo.listResult.find(e=>"active"===e.status):{})}),g={setRoom(e){m.selectedRoom=e},async getRooms(){const e=await a();e.rooms&&(m.rooms=e.rooms)},async getRoomsById(e){const t=await c(e);if(t.room&&(m.roomInfo=t.room),t.room.listResult){const e=t.room.listResult.find(e=>"active"===e.status||"pending"===e.status);var n;if(e)null===(n=e.results)||void 0===n||n.forEach(e=>{var t;null===(t=m.roomInfo.players)||void 0===t||t.map(t=>{t.userId===e.userId&&(t.voted=!0,t.point=e.point)})});m.currentSession=e}return t.room},async getCurrentSession(){return m.currentSession?m.currentSession:{}},async addRoom(e){const t=await i(e);t.room&&(m.rooms=[...m.rooms,t.room])},addPlayer({name:e,userId:t,clientId:n}){if(t){var o;const a=null===(o=m.roomInfo.players)||void 0===o?void 0:o.find(e=>e.userId===t);var r,s;if(a)null===(r=m.roomInfo.players)||void 0===r||r.map(o=>{o.userId===t&&(o.name=e,o.clientId=n)});else null===(s=m.roomInfo.players)||void 0===s||s.push({name:e,clientId:n,userId:t,voted:!1,point:""})}},removePlayer({userId:e}){var t;e&&(m.roomInfo.players=null===(t=m.roomInfo.players)||void 0===t?void 0:t.filter(t=>t.userId!==e))},async startSession(e,t){var n;const o=new Date;o.setMinutes(o.getMinutes()+e),m.roomInfo.timeCountDown={playing:!0,status:"playing",endTime:o.toISOString()};const r=await l({roomId:m.roomInfo._id,story:m.currentSession&&m.currentSession.story?m.currentSession.story:t,timeCountDown:m.roomInfo.timeCountDown});console.log("startSession ",r),m.roomInfo.players=r.room.players,m.currentSession=r.room.result;const s=null===(n=m.roomInfo.listResult)||void 0===n?void 0:n.findIndex(e=>{var t;return e._id===(null===(t=r.room.result)||void 0===t?void 0:t._id)});var a,c;(console.log("index ",s),s&&s>-1)?null===(a=m.roomInfo.listResult)||void 0===a||a.map(e=>{var t;e._id===(null===(t=r.room.result)||void 0===t?void 0:t._id)&&(e=r.room.result||{})}):null===(c=m.roomInfo.listResult)||void 0===c||c.push(r.room.result||{})},async endSession(){var e,t;m.roomInfo.timeCountDown={playing:!1,status:"initial"};const n=await d({roomId:m.roomInfo._id,sessionId:null===(e=m.currentSession)||void 0===e?void 0:e._id});console.log("endSession ",n),m.roomInfo.players=n.room.players,null===(t=m.roomInfo.listResult)||void 0===t||t.map(e=>{var t;e._id===(null===(t=m.currentSession)||void 0===t?void 0:t._id)&&(m.currentSession={},e=n.room.result||{})})},async getResultSession(e){var t;m.roomInfo.timeCountDown={playing:!1,status:"pending",endTime:(new Date).toISOString()};const n=await u({roomId:m.roomInfo._id,sessionId:e});console.log("getResultSession ",n);const o=n.room.result;var r;o&&(null===(r=o.results)||void 0===r||r.forEach(e=>{var t;null===(t=m.roomInfo.players)||void 0===t||t.map(t=>{t.userId===e.userId?(t.voted=!0,t.point=e.point):(t.voted=!1,t.point="")})}));m.currentSession=o,null===(t=m.roomInfo.listResult)||void 0===t||t.map(t=>{var o;t._id===e&&(t.averagePoint=(null===(o=n.room.result)||void 0===o?void 0:o.averagePoint)||"0")})},voting({userId:e,point:t}){var n,o;b({roomId:m.roomInfo._id,userId:e,point:t}),null===(n=m.roomInfo.listResult)||void 0===n||n.forEach(n=>{var o,r;"active"===n.status&&(-1===(null===(o=n.results)||void 0===o?void 0:o.findIndex(t=>t.userId===e))?n.results.push({userId:e,point:t}):null===(r=n.results)||void 0===r||r.map(n=>{n.userId===e&&(n.point=t)}))}),null===(o=m.roomInfo.players)||void 0===o||o.map(t=>{t.userId===e&&(t.voted=!0)})}};t["a"]={state:m,getters:j,...g}},"6d37":function(e,t,n){"use strict";n("97c1")},9303:function(e,t,n){"use strict";n("ced6")},"97c1":function(e,t,n){},"98e9":function(e,t,n){e.exports=n.p+"img/pocker.af8c0b0d.png"},"9ea0":function(e,t,n){"use strict";n("6a72")},a4a3:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var o=n("7a23");const r={class:"container"};function s(e,t,n,s,a,c){const i=Object(o["D"])("Spinner"),l=Object(o["D"])("Nav"),u=Object(o["D"])("router-view"),d=Object(o["D"])("SettingsProvider");return Object(o["u"])(),Object(o["d"])(d,null,{default:Object(o["J"])(()=>[Object(o["i"])(i,{start:e.spin.val},null,8,["start"]),Object(o["g"])("div",r,[Object(o["i"])(l),Object(o["i"])(u),Object(o["g"])("h2",null,Object(o["F"])(e.welcomeMsg),1)])]),_:1})}var a=n("9ab4"),c=n("ce1f");const i={class:"navbar navbar-expand navbar-dark bg-dark"},l=Object(o["g"])("a",{href:"/",class:"navbar-brand"},"Zinzo",-1),u={class:"navbar-nav mr-auto"},d={class:"nav-item"},b=Object(o["h"])(" Home "),m={class:"nav-item"},j=Object(o["h"])(" Pocker "),g={key:0,class:"navbar-nav ml-auto"},p={class:"nav-item"},O=Object(o["h"])(" Sign Up "),v={class:"nav-item"},f=Object(o["h"])(" Login "),y={key:1,class:"navbar-nav ml-auto"},h={class:"nav-item"},S={class:"nav-item"},I=Object(o["h"])(" LogOut ");function k(e,t,n,r,s,a){const c=Object(o["D"])("font-awesome-icon"),k=Object(o["D"])("router-link");return Object(o["u"])(),Object(o["f"])("nav",i,[l,Object(o["g"])("div",u,[Object(o["g"])("li",d,[Object(o["i"])(k,{to:"/vue-page/",class:"nav-link"},{default:Object(o["J"])(()=>[Object(o["i"])(c,{icon:"home"}),b]),_:1})]),Object(o["g"])("li",m,[Object(o["i"])(k,{to:"/vue-page/pocker",class:"nav-link"},{default:Object(o["J"])(()=>[Object(o["i"])(c,{icon:"play"}),j]),_:1})])]),e.currentUser?Object(o["e"])("",!0):(Object(o["u"])(),Object(o["f"])("div",g,[Object(o["g"])("li",p,[Object(o["i"])(k,{to:"/vue-page/register",class:"nav-link"},{default:Object(o["J"])(()=>[Object(o["i"])(c,{icon:"user-plus"}),O]),_:1})]),Object(o["g"])("li",v,[Object(o["i"])(k,{to:"/vue-page/login",class:"nav-link"},{default:Object(o["J"])(()=>[Object(o["i"])(c,{icon:"sign-in-alt"}),f]),_:1})])])),e.currentUser?(Object(o["u"])(),Object(o["f"])("div",y,[Object(o["g"])("li",h,[Object(o["i"])(k,{to:"/vue-page/profile",class:"nav-link"},{default:Object(o["J"])(()=>[Object(o["i"])(c,{icon:"user"}),Object(o["h"])(" "+Object(o["F"])(e.message),1)]),_:1})]),Object(o["g"])("li",S,[Object(o["g"])("a",{class:"nav-link",onClick:t[0]||(t[0]=Object(o["L"])((...t)=>e.logOut&&e.logOut(...t),["prevent"])),href:"/"},[Object(o["i"])(c,{icon:"sign-out-alt"}),I])])])):Object(o["e"])("",!0)])}n("14d9");var w=n("2948"),C=n("6605"),_=Object(o["j"])({name:"Nav",setup(){const{state:e,getters:t,getUser:n,logout:r}=w["a"],s=Object(C["d"])(),a=Object(o["A"])(""),c=Object(o["A"])("");Object(o["s"])(async()=>{i()});const i=async()=>{await n().then(e=>{e||s.push("/login"),console.log("getUser ",e),a.value="Hi, "+e.name,c.value=e.email})},l=e=>{e&&e.preventDefault(),r(),c.value=void 0,console.log("logOut"),s.push("/login")};return{state:e,getters:t,getUser:n,message:a,currentUser:c,logOut:l}}}),T=n("6b0d"),x=n.n(T);const P=x()(_,[["render",k]]);var D=P;const R=e=>(Object(o["y"])("data-v-04d85fe7"),e=e(),Object(o["v"])(),e),L={class:"login"},A={class:"form-group my-2"},F=R(()=>Object(o["g"])("label",null,"Email",-1)),E={class:"form-group my-2"},N=R(()=>Object(o["g"])("label",null,"Password",-1)),U={class:"text-danger my-2"},H=R(()=>Object(o["g"])("button",{class:"btn btn-success btn-block my-2",type:"submit"}," Login ",-1));function M(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",null,Object(o["F"])(e.msg),1),Object(o["g"])("div",L,[Object(o["g"])("form",{onSubmit:t[2]||(t[2]=Object(o["L"])((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"]))},[Object(o["g"])("div",A,[F,Object(o["K"])(Object(o["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),placeholder:"Email",required:""},null,512),[[o["H"],e.form.email]])]),Object(o["g"])("div",E,[N,Object(o["K"])(Object(o["g"])("input",{type:"password",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=t=>e.form.password=t),placeholder:"Password",required:""},null,512),[[o["H"],e.form.password]])]),Object(o["g"])("div",U,Object(o["F"])(e.userStore.state.error),1),H],32)])],64)}var J=Object(o["j"])({emits:["submitted"],props:{msg:{type:String,required:!0}},methods:{handleChange(e){console.log(e.target.value)}},setup(e,{emit:t}){const n=Object(o["z"])({email:"",password:""}),r=()=>{w["a"].login(n.email,n.password).then(()=>{t("submitted")}),n.email="",n.password=""};return{form:n,userStore:w["a"],onSubmit:r}}});n("6d37");const z=x()(J,[["render",M],["__scopeId","data-v-04d85fe7"]]);var V=z;function q(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])("div",null,[Object(o["g"])("h3",null,Object(o["F"])(e.state.count)+" x 2 = "+Object(o["F"])(e.getters.timmes2),1),Object(o["g"])("button",{class:"btn btn-success block m-2",onClick:t[0]||(t[0]=t=>e.inc(1))},"Inc")])}const B=Object(o["z"])({count:0}),$=Object(o["z"])({timmes2:Object(o["b"])(()=>2*B.count)}),K={inc(e){B.count+=e}};var Z={state:B,getters:$,...K},G=Object(o["j"])({setup(){const{state:e,getters:t,inc:n}=Z;return{state:e,getters:t,inc:n}}});const W=x()(G,[["render",q]]);var Q=W;const X=e=>(Object(o["y"])("data-v-339e2e70"),e=e(),Object(o["v"])(),e),Y={key:0,class:"spin"},ee=X(()=>Object(o["g"])("div",{class:"ring"},[Object(o["g"])("div",{class:"lds-roller"},[Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div")])],-1)),te=[ee];function ne(e,t,n,r,s,a){return e.start?(Object(o["u"])(),Object(o["f"])("div",Y,te)):Object(o["e"])("",!0)}var oe=Object(o["j"])({props:{start:Boolean}});n("9303");const re=x()(oe,[["render",ne],["__scopeId","data-v-339e2e70"]]);var se=re;function ae(e,t,n,r,s,a){return Object(o["C"])(e.$slots,"default")}var ce=Object(o["j"])({setup(){const e=Object(o["z"])({theme:"light"});return Object(o["w"])("settings",e),Object(o["I"])(e,e=>{console.log("Provider: theme has been changed to "+e.theme)}),{settings:e}}});const ie=x()(ce,[["render",ae]]);var le=ie;function ue(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])("button",{class:Object(o["o"])({"dark-mode":"dark"===e.settings.theme}),onClick:t[0]||(t[0]=(...t)=>e.toggleMode&&e.toggleMode(...t))}," Switch to "+Object(o["F"])(e.oppsiteTheme)+" mode ",3)}var de=Object(o["j"])({setup(){const e=Object(o["m"])("settings",{theme:"light"}),t=Object(o["b"])(()=>"dark"===e.theme?"light":"dark"),n=()=>{e.theme=t.value,console.log("settings2 ",e)};return{settings:e,oppsiteTheme:t,toggleMode:n}}});const be=x()(de,[["render",ue]]);var me=be;let je=class extends c["b"]{constructor(){super(...arguments),this.spin={val:!1}}get logged(){return w["a"].getters.isLoggedIn}get welcomeMsg(){return"Welcome, "+(w["a"].state.name?w["a"].state.name:"guest")}};je=Object(a["a"])([Object(c["a"])({components:{Nav:D,Login:V,Counter:Q,Spinner:se,SettingsProvider:le,ThemeButton:me},provide(){return{mySpinner:this.spin}}})],je);var ge=je;n("34fc");const pe=x()(ge,[["render",s]]);var Oe=pe;const ve={class:"home"},fe=Object(o["g"])("h3",null,"Made by Zinzo",-1),ye=[fe];function he(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])("div",ve,ye)}var Se=Object(o["j"])({name:"Home",inject:["mySpinner"]});const Ie=x()(Se,[["render",he]]);var ke=Ie;const we={class:"content"},Ce={class:"login-form"};function _e(e,t,n,r,s,a){const c=Object(o["D"])("LoginForm");return Object(o["u"])(),Object(o["f"])("div",we,[Object(o["g"])("div",Ce,[Object(o["i"])(c,{msg:"Login Page",onSubmitted:e.submitted},null,8,["onSubmitted"])])])}var Te=Object(o["j"])({name:"Login",components:{LoginForm:V},setup(){const e=Object(C["d"])();console.log("userStore.state.email ",w["a"].state.email);const t=Object(o["b"])(()=>!!w["a"].state.email);Object(o["s"])(()=>{console.log("Login Page ",t.value),t.value&&n()});const n=()=>{console.log("submitted"),window.location.replace("/")};return{router:e,submitted:n}}});const xe=x()(Te,[["render",_e]]);var Pe=xe;const De={class:"container"},Re={class:"jumbotron"},Le=Object(o["h"])(" Profile "),Ae=Object(o["g"])("strong",null,"Id:",-1),Fe=Object(o["g"])("strong",null,"Email:",-1);function Ee(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])("div",De,[Object(o["g"])("header",Re,[Object(o["g"])("h3",null,[Object(o["g"])("strong",null,Object(o["F"])(e.currentUser.name),1),Le])]),Object(o["g"])("p",null,[Ae,Object(o["h"])(" "+Object(o["F"])(e.currentUser._id),1)]),Object(o["g"])("p",null,[Fe,Object(o["h"])(" "+Object(o["F"])(e.currentUser.email),1)])])}var Ne=Object(o["j"])({data(){return{currentUser:{}}},mounted(){const{state:e}=w["a"];this.currentUser=e}});const Ue=x()(Ne,[["render",Ee]]);var He=Ue;const Me=e=>(Object(o["y"])("data-v-61deca61"),e=e(),Object(o["v"])(),e),Je={key:0},ze=Me(()=>Object(o["g"])("button",null,"Submit",-1)),Ve={key:1},qe={class:"text-center"},Be={key:0},$e={key:0,class:"d-flex justify-content-center"},Ke={class:"fs-4 text-nowrap"},Ze={class:"d-flex justify-content-center"},Ge={class:"p-2"},We={class:"p-2"},Qe={key:1},Xe={class:"d-flex justify-content-center"},Ye={class:"fs-4 text-nowrap"},et={style:{color:"red"}},tt={class:"input-group input-group-sm mb-3"},nt=Me(()=>Object(o["g"])("span",{class:"input-group-text"},"Minute(s)",-1)),ot={key:2},rt={class:"input-group input-group-sm mb-3"},st=Me(()=>Object(o["g"])("span",{class:"input-group-text"},"Minute(s)",-1)),at=Me(()=>Object(o["g"])("span",{class:"input-group-text"},"Story Summary",-1)),ct={class:"row"},it={class:"col-3"},lt={key:0,class:"list-group list-player"},ut={class:"btn-group"},dt={class:"col-9"},bt={class:"row"};function mt(e,t,n,r,s,a){var c,i;const l=Object(o["D"])("CurrentDateTime"),u=Object(o["D"])("CountDownTime"),d=Object(o["D"])("Player"),b=Object(o["D"])("PockerCard");return Object(o["u"])(),Object(o["f"])("div",null,[Object(o["g"])("h3",null,Object(o["F"])(e.getters.roomName),1),e.joined?Object(o["e"])("",!0):(Object(o["u"])(),Object(o["f"])("div",Je,[Object(o["i"])(l),Object(o["g"])("form",{onSubmit:t[1]||(t[1]=Object(o["L"])((...t)=>e.submit&&e.submit(...t),["prevent"])),class:"form"},[Object(o["K"])(Object(o["g"])("input",{name:"name","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t)},null,512),[[o["H"],e.name]]),ze],32)])),e.joined?(Object(o["u"])(),Object(o["f"])("div",Ve,[Object(o["g"])("div",qe,["playing"===e.getters.roomStatus?(Object(o["u"])(),Object(o["f"])("div",Be,[e.getters.activeSession?(Object(o["u"])(),Object(o["f"])("div",$e,[Object(o["g"])("p",Ke," Please vote for "+Object(o["F"])(e.getters.activeSession.story),1)])):Object(o["e"])("",!0),Object(o["g"])("div",Ze,[Object(o["g"])("div",Ge,[Object(o["i"])(u,{getEndTime:e.getters.endTime?e.getters.endTime:""},null,8,["getEndTime"])]),Object(o["g"])("div",We,[Object(o["g"])("button",{type:"button",class:"btn btn-warning",onClick:t[2]||(t[2]=t=>e.getResult(e.getters.activeSession._id))}," Get result! ")])])])):Object(o["e"])("",!0),"pending"===e.getters.roomStatus?(Object(o["u"])(),Object(o["f"])("div",Qe,[Object(o["g"])("div",Xe,[Object(o["g"])("p",Ye,[Object(o["h"])(" Average Point of "+Object(o["F"])(e.getters.activeSession.story)+" is ",1),Object(o["g"])("span",et,Object(o["F"])(e.getters.activeSession.averagePoint),1)])]),Object(o["g"])("div",tt,[nt,Object(o["K"])(Object(o["g"])("input",{type:"text",class:"form-control","aria-label":"Set Countdown Time","onUpdate:modelValue":t[3]||(t[3]=t=>e.seconds=t)},null,512),[[o["H"],e.seconds]]),Object(o["g"])("button",{type:"button",class:"btn btn-success",onClick:t[4]||(t[4]=t=>e.startSessionHandle())}," Re-start posting "),Object(o["g"])("button",{type:"button",class:"btn btn-warning",onClick:t[5]||(t[5]=t=>e.endSessionHandle())}," Finish this post! ")])])):Object(o["e"])("",!0),"initial"===e.getters.roomStatus?(Object(o["u"])(),Object(o["f"])("div",ot,[Object(o["g"])("div",rt,[st,Object(o["K"])(Object(o["g"])("input",{type:"text",class:"form-control","aria-label":"Set Countdown Time","onUpdate:modelValue":t[6]||(t[6]=t=>e.seconds=t)},null,512),[[o["H"],e.seconds]]),at,Object(o["K"])(Object(o["g"])("input",{type:"text",class:"form-control","aria-label":"Story Summary","onUpdate:modelValue":t[7]||(t[7]=t=>e.textSummary=t)},null,512),[[o["H"],e.textSummary]]),Object(o["g"])("button",{type:"button",class:"btn btn-success",onClick:t[8]||(t[8]=t=>e.startSessionHandle())}," Start posting ")])])):Object(o["e"])("",!0),Object(o["g"])("div",ct,[Object(o["g"])("div",it,[null!==(c=e.state)&&void 0!==c&&null!==(i=c.roomInfo)&&void 0!==i&&i.players?(Object(o["u"])(),Object(o["f"])("ul",lt,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["B"])(e.state.roomInfo.players,(t,n)=>(Object(o["u"])(),Object(o["f"])("li",{class:"list-group-item",key:n},[Object(o["i"])(d,{player:t,roomStatus:e.getters.roomStatus},null,8,["player","roomStatus"])]))),128))])):Object(o["e"])("",!0),Object(o["g"])("div",ut,[Object(o["g"])("button",{type:"button",class:"btn btn-danger",onClick:t[9]||(t[9]=(...t)=>e.leave&&e.leave(...t))}," Leave Room ")])]),Object(o["g"])("div",dt,[Object(o["g"])("div",bt,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["B"])(e.state.pockerCards,(t,n)=>(Object(o["u"])(),Object(o["f"])("div",{class:"card",key:n},[Object(o["i"])(b,{roomStatus:e.getters.roomStatus,cardValue:t,active:e.selectedCard===t,onSelectCard:e.selectCard,onConfirmSelected:e.confirmSelected},null,8,["roomStatus","cardValue","active","onSelectCard","onConfirmSelected"])]))),128))])])])])])):Object(o["e"])("",!0)])}var jt=n("6d1f"),gt=n("98e9"),pt=n.n(gt);const Ot=e=>(Object(o["y"])("data-v-51bd8ee3"),e=e(),Object(o["v"])(),e),vt={class:"content"},ft={class:"card-title"},yt={key:0},ht={key:1,class:"card-body"},St=Ot(()=>Object(o["g"])("div",{class:"content text-center"},[Object(o["g"])("img",{src:pt.a,class:"rounded",alt:"Pocker"})],-1)),It=[St];function kt(e,t,n,r,s,a){return"playing"===e.roomStatus?(Object(o["u"])(),Object(o["f"])("div",{key:0,class:Object(o["o"])(["card-body",e.active?"active":null]),onClick:t[1]||(t[1]=t=>e.selectCard(e.cardValue))},[Object(o["g"])("div",vt,[Object(o["g"])("h5",ft,Object(o["F"])(e.cardValue),1),e.active?(Object(o["u"])(),Object(o["f"])("div",yt,[Object(o["g"])("a",{href:"#",class:"card-link",onClick:t[0]||(t[0]=t=>e.confirmSelectedHandle(e.cardValue))},"Confirm")])):Object(o["e"])("",!0)])],2)):(Object(o["u"])(),Object(o["f"])("div",ht,It))}var wt=Object(o["j"])({emits:["selectCard","confirmSelected"],props:{roomStatus:{type:String,required:!0},cardValue:{type:String,required:!0},active:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=e=>{"Here we go"!==e&&t("selectCard",e)},o=e=>{t("confirmSelected",e)};return{selectCard:n,confirmSelectedHandle:o}}});n("49b9");const Ct=x()(wt,[["render",kt],["__scopeId","data-v-51bd8ee3"]]);var _t=Ct;const Tt={class:"row player-item"},xt={class:"col-6"},Pt={class:"text-center"},Dt={class:"col-6"},Rt={key:0,class:"text-center"},Lt={key:0,class:"badge text-bg-success"},At={key:1,class:"text-center"},Ft={key:0},Et={class:"badge text-bg-info fs-6"};function Nt(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])("div",Tt,[Object(o["g"])("div",xt,[Object(o["g"])("div",Pt,Object(o["F"])(e.player.name),1)]),Object(o["g"])("div",Dt,["playing"===e.roomStatus?(Object(o["u"])(),Object(o["f"])("div",Rt,[e.player.voted?(Object(o["u"])(),Object(o["f"])("span",Lt," Voted ")):Object(o["e"])("",!0)])):Object(o["e"])("",!0),"pending"===e.roomStatus?(Object(o["u"])(),Object(o["f"])("div",At,[e.player.point?(Object(o["u"])(),Object(o["f"])("h5",Ft,[Object(o["g"])("span",Et,Object(o["F"])(e.player.point),1)])):Object(o["e"])("",!0)])):Object(o["e"])("",!0)])])}var Ut=Object(o["j"])({props:{roomStatus:{type:String,required:!0},player:{type:Object}}});n("5c88");const Ht=x()(Ut,[["render",Nt],["__scopeId","data-v-698db769"]]);var Mt=Ht;const Jt={class:"font-bold pt-3 text-6xl"};function zt(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])("div",null,[Object(o["g"])("p",Jt,Object(o["F"])(e.currentTime.toLocaleTimeString()),1)])}var Vt=Object(o["j"])({setup(){const e=Object(o["A"])(new Date),t=()=>{e.value=new Date},n=setInterval(t,1e3);return Object(o["q"])(()=>{clearInterval(n)}),{currentTime:e}}});const qt=x()(Vt,[["render",zt]]);var Bt=qt;const $t={class:"badge bg-primary text-wrap"},Kt={class:"count-time"};function Zt(e,t,n,r,s,a){return Object(o["u"])(),Object(o["f"])("div",$t,[Object(o["g"])("p",Kt,Object(o["F"])(e.displayTimeLeft),1)])}var Gt=n("4914"),Wt=Object(o["j"])({props:{getEndTime:{type:String,required:!0}},setup(e){const t=Object(o["A"])(0),n=Object(o["A"])(Date.now()),r=Date.parse(e.getEndTime),s=Object(o["b"])(()=>{const e=Math.floor(t.value/1e3%60),n=Math.floor(t.value/1e3/60%60),o=Math.floor(t.value/36e5%24),r=Math.floor(t.value/864e5);return r>0?`${Object(Gt["b"])(r)} day(s) : ${Object(Gt["b"])(o)} hour(s) | ${Object(Gt["b"])(n)} : ${Object(Gt["b"])(e)}`:o>0?`${Object(Gt["b"])(o)} hour(s) | ${Object(Gt["b"])(n)} : ${Object(Gt["b"])(e)}`:n>=0?`${Object(Gt["b"])(n)} : ${Object(Gt["b"])(e)}`:"00 : 00"}),a=setInterval(()=>{t.value=r-Date.now(),t.value<=0&&clearInterval(a)},1e3);return Object(o["q"])(()=>{clearInterval(a)}),{currentTime:n,endTime:r,displayTimeLeft:s}}});n("9ea0");const Qt=x()(Wt,[["render",Zt],["__scopeId","data-v-6adc6d2d"]]);var Xt=Qt,Yt=n("daa8");function en(e){const t="https://authen-api-1.herokuapp.com:"+e;return Object(Yt["a"])(t,{transports:["websocket"]})}function tn(e){e.on("get users",e=>{console.log("get users",e),jt["a"].addPlayer(e.player)}),e.on("user leaves",e=>{console.log("user leaves",e),e&&jt["a"].removePlayer(e.player)}),e.on("new voting",e=>{console.log("new voting",e),jt["a"].voting(e)}),e.on("updatedRoomStartus",e=>{console.log("updatedRoomStartus",e),jt["a"].getRoomsById(e)})}function nn(e){function t(t){e.emit("join-room",t)}function n(t){e.emit("leave",t)}return[t,n]}var on=Object(o["j"])({components:{PockerCard:_t,Player:Mt,CountDownTime:Xt,CurrentDateTime:Bt},setup(){const{state:e,getters:t,getRoomsById:n,getCurrentSession:r,startSession:s,endSession:a,getResultSession:c,voting:i}=jt["a"],l=en("5000"),[u,d]=nn(l);tn(l);const b=Object(C["c"])(),m=Object(o["b"])(()=>b.params.id),j=b.params["id"],g=Object(o["A"])(""),p=Object(o["A"])(!1),O=Object(o["A"])(""),v=Object(o["A"])("10"),f=Object(o["A"])("");Object(o["s"])(async()=>{await n(j);const e=await r();e&&e.story&&(f.value=e.story)});const y=()=>{const e={userId:w["a"].state._id,name:g.value,roomId:b.params.id};u(JSON.stringify(e)),g.value="",p.value=!0,n(j)},h=()=>{const e={userId:w["a"].state._id,roomId:b.params.id};d(JSON.stringify(e)),p.value=!1},S=()=>{s(parseInt(v.value),f.value),O.value=""},I=()=>{a(),O.value=""},k=e=>{c(e),O.value=""},_=e=>{O.value=e},T=e=>{const t={userId:w["a"].state._id,point:e};i(t)};return{roomId:m,name:g,joined:p,selectedCard:O,seconds:v,textSummary:f,state:e,getters:t,submit:y,leave:h,selectCard:_,confirmSelected:T,startSessionHandle:S,endSessionHandle:I,getResult:k}}});n("d49f");const rn=x()(on,[["render",mt],["__scopeId","data-v-61deca61"]]);var sn=rn;const an="Loading",cn=[{path:"/vue-page/",name:"Home",component:ke},{path:"/vue-page/home",redirect:"/"},{path:"/vue-page/login",name:"Login",component:Pe},{path:"/vue-page/register",name:"Register",component:()=>n.e("chunk-599f2679").then(n.bind(null,"73cf"))},{path:"/vue-page/profile",name:"profile",component:He},{path:"/vue-page/pocker",name:"Pocker",component:()=>n.e("chunk-640a155a").then(n.bind(null,"8c6e"))},{path:"/vue-page/pocker/:id",name:"PockerRoom",component:sn,beforeEnter:(e,t,n)=>{const{id:o}=e.params;Array.isArray(o)?n({path:"/vue-page/error"}):n()}},{path:"/:catchAll(.*)",name:"PageNotFound",component:()=>n.e("chunk-2d208bfd").then(n.bind(null,"a5b5"))}],ln=Object(C["a"])({history:Object(C["b"])(),routes:cn});ln.beforeEach((e,t,n)=>{const o=["/profile"],r=o.includes(e.path),s=localStorage.getItem("user");r&&!s?n("/login"):n()}),ln.afterEach((e,t)=>{Object(o["n"])(()=>{document.title=""+String(e.name)||an})});var un=ln,dn=n("bc3a"),bn=n.n(dn);bn.a.defaults.baseURL="https://authen-api-1.herokuapp.com/api";let mn=!1;bn.a.interceptors.request.use(async e=>{const t=localStorage.getItem("user")||void 0,n=t?JSON.parse(t):void 0;return null!==n&&void 0!==n&&n.token&&(e.headers={...e.headers,Authorization:n.token}),e},e=>e),bn.a.interceptors.response.use(e=>e,async e=>{var t;const n=e.config;if(401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&!mn){mn=!0;const e=localStorage.getItem("user")||"",t=JSON.parse(e),{status:o,data:r}=await bn.a.post("/v1/auth/refresh_token",{email:t.user.email,refreshToken:t.refreshToken},{withCredentials:!0});if(200===o){if(r.token){bn.a.defaults.headers.common["Authorization"]=r.token;const e={...t,token:r.token};return localStorage.setItem("user",JSON.stringify(e)),bn()(n)}if(r.error)return localStorage.removeItem("user"),r.error;if(!r.token)return localStorage.removeItem("user"),r}}return mn=!1,e}),Object(o["c"])(Oe).use(un).mount("#app")},ced6:function(e,t,n){},d49f:function(e,t,n){"use strict";n("66a1")}});
//# sourceMappingURL=app.6ca7a3fa.js.map